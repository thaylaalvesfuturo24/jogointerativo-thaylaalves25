<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Jogo Moto Esquiva Touch</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: #111;
      color: #fff;
      font-family: sans-serif;
      text-align: center;
    }

    h1 {
      margin: 20px 0;
    }

    #game {
      position: relative;
      margin: 0 auto;
      width: 300px;
      height: 500px;
      background: #333;
      border: 4px solid #555;
      overflow: hidden;
      touch-action: none;
    }

    .lane {
      position: absolute;
      top: 0; bottom: 0;
      width: 100px;
      border-left: 1px dashed #444;
      border-right: 1px dashed #444;
    }
    .lane:nth-child(1) { left: 0; }
    .lane:nth-child(2) { left: 100px; }
    .lane:nth-child(3) { left: 200px; }

    #moto {
      position: absolute;
      bottom: 20px;
      width: 60px;
      height: 100px;
      background: orange;
      border-radius: 10px;
      left: 120px;
      transition: left 0.2s ease;
    }

    .obstacle {
      position: absolute;
      width: 60px;
      height: 80px;
      background: red;
      border-radius: 8px;
      top: -80px;
    }

    #scoreboard {
      margin: 10px 0;
      font-size: 20px;
    }

    #startBtn {
      padding: 10px 20px;
      font-size: 18px;
      background: green;
      border: none;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }

    #gameOverScreen {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.85);
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }

    #gameOverScreen div {
      font-size: 24px;
      margin-bottom: 15px;
    }

    #restartBtn {
      padding: 8px 18px;
      background: #e74c3c;
      color: #fff;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>üèçÔ∏è Moto Esquiva Touch</h1>
<div id="game">
  <div class="lane"></div>
  <div class="lane"></div>
  <div class="lane"></div>
  <div id="moto"></div>

  <div id="gameOverScreen">
    <div id="finalScore"></div>
    <button id="restartBtn">Jogar Novamente</button>
  </div>
</div>

<div id="scoreboard">Pontua√ß√£o: 0</div>
<button id="startBtn">Iniciar Jogo</button>

<script>
(() => {
  const game = document.getElementById("game");
  const moto = document.getElementById("moto");
  const scoreboard = document.getElementById("scoreboard");
  const startBtn = document.getElementById("startBtn");
  const gameOverScreen = document.getElementById("gameOverScreen");
  const finalScore = document.getElementById("finalScore");
  const restartBtn = document.getElementById("restartBtn");

  const lanes = [20, 120, 220];
  let currentLane = 1;
  let score = 0;
  let gameOver = false;

  let obstacles = [];
  let obstacleInterval;
  let moveInterval;

  function resetGame() {
    obstacles.forEach(o => o.element.remove());
    obstacles = [];
    currentLane = 1;
    moto.style.left = lanes[currentLane] + 'px';
    score = 0;
    gameOver = false;
    scoreboard.textContent = "Pontua√ß√£o: 0";
    gameOverScreen.style.display = "none";
  }

  function createObstacle() {
    const lane = Math.floor(Math.random() * 3);
    const obstacle = document.createElement("div");
    obstacle.classList.add("obstacle");
    obstacle.style.left = lanes[lane] + "px";
    game.appendChild(obstacle);
    obstacles.push({ element: obstacle, lane, y: -80 });
  }

  function moveObstacles() {
    obstacles.forEach((o, i) => {
      o.y += 5;
      o.element.style.top = o.y + "px";

      // Colis√£o
      if (o.y + 80 >= 400 && o.lane === currentLane) {
        endGame();
      }

      if (o.y > 500) {
        o.element.remove();
        obstacles.splice(i, 1);
        score++;
        scoreboard.textContent = "Pontua√ß√£o: " + score;
      }
    });
  }

  function moveMoto(direction) {
    if (direction === "left" && currentLane > 0) {
      currentLane--;
    } else if (direction === "right" && currentLane < 2) {
      currentLane++;
    }
    moto.style.left = lanes[currentLane] + "px";
  }

  function endGame() {
    clearInterval(obstacleInterval);
    clearInterval(moveInterval);
    gameOver = true;
    finalScore.textContent = "Voc√™ bateu! Pontua√ß√£o: " + score;
    gameOverScreen.style.display = "flex";
    startBtn.disabled = false;
  }

  // In√≠cio do jogo
  startBtn.addEventListener("click", () => {
    resetGame();
    startBtn.disabled = true;
    obstacleInterval = setInterval(createObstacle, 1000);
    moveInterval = setInterval(moveObstacles, 20);
  });

  restartBtn.addEventListener("click", () => {
    startBtn.click();
  });

  // Suporte a swipe/touch
  let startX = 0;

  game.addEventListener("touchstart", e => {
    startX = e.touches[0].clientX;
  });

  game.addEventListener("touchend", e => {
    const endX = e.changedTouches[0].clientX;
    const diffX = endX - startX;

    if (Math.abs(diffX) > 30) {
      if (diffX < 0) moveMoto("left");
      else moveMoto("right");
    }
  });

  // Suporte a teclado tamb√©m
  document.addEventListener("keydown", e => {
    if (e.key === "ArrowLeft") moveMoto("left");
    if (e.key === "ArrowRight") moveMoto("right");
  });

  // Inicializa moto
  moto.style.left = lanes[currentLane] + "px";
})();
</script>

</body>
</html>
